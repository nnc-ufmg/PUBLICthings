#define pinoEmissor1 2  // Pino  de envio 1
#define pinoEmissor2 3  // Pino de envio 2
#define pinoBotao 11    // Pino do botão
#define DEBOUNCE_TIME 70

bool estadoAnterior = LOW;  // Estado anterior do botão
bool estadoAtual;           // Estado atual do botão
unsigned long tempoUltimaLeitura = 0;  // Tempo da última leitura do botão
unsigned long tempoAtual = 0;  // Tempo atual

void setup() {
  Serial.begin(9600);  // Inicializa a comunicação serial para depuração

  pinMode(pinoEmissor1, OUTPUT);
  pinMode(pinoEmissor2, OUTPUT);
  pinMode(pinoBotao, INPUT);  // Usa resistor de pull-up interno
}

void loop() {
  tempoAtual = millis();
  estadoAtual = !digitalRead(pinoBotao);  // Inverte a leitura por causa do INPUT_PULLUP

  // Verifica se o botão foi pressionado
  if (estadoAtual && !estadoAnterior) {
    if ((tempoAtual - tempoUltimaLeitura) > DEBOUNCE_TIME) {
      Serial.print("O botão foi pressionado em: ");
      Serial.println(tempoAtual);

      digitalWrite(pinoEmissor1, HIGH);
      digitalWrite(pinoEmissor2, HIGH);
      tempoUltimaLeitura = tempoAtual;
    }
  }

  // Verifica se o botão foi solto
  if (!estadoAtual && estadoAnterior) {
    if ((tempoAtual - tempoUltimaLeitura) > DEBOUNCE_TIME) {
      digitalWrite(pinoEmissor1, LOW);
      digitalWrite(pinoEmissor2, LOW);
      tempoUltimaLeitura = tempoAtual;
    }
  }

  // Atualiza o estado anterior
  estadoAnterior = estadoAtual;
}
